/**
 * Copyright © https://github.com/jarry All rights reserved.
 * @author: jarryli@gmail.com
 * @version: 1.0
 */

#include <stdio.h>
#include <stdlib.h>
#include <time.h>
#include <memory.h>

// #define BOOL int
// #define TRUE 1
// #define FALSE 0

typedef enum
{
  true = 1,
  false = 0
} bool;

void swap(int arr[], int a, int b)
{
  int tmp = arr[b];
  arr[b] = arr[a];
  arr[a] = tmp;
}

int count(int arr[], int len, int number)
{
  int count = 0;
  for (int i = 0; i < len; i++)
  {
    if (arr[i] == number)
      count++;
  }
  return count;
}

void print_array(float *arr, int len)
{
  printf("{ ");
  for (int i = 0; i < len; i++)
  {
    printf("%.1f", arr[i]);
    if (i < len - 1)
    {
      printf(", ");
    }
  }
  printf(" }");
}

// 1. 希尔排序，基于插入排序进行了分组排序
float *shell_sort(float arr[], int len)
{
  //  设置分组间隔
  int gap = len / 2;
  // 如果间隔大于0，则表示还可以继续分
  while (gap > 0)
  {
    for (int i = 0; i < len; i++)
    {
      float current = arr[i];
      int j = i;
      printf("\r\n gap=%d, j=%d", gap, j);
      print_array(arr, len);
      // 分组按照插入排序逐个位移
      while (j >= gap && current < arr[j - gap])
      {
        arr[j] = arr[j - gap];
        j -= gap;
      }
      // 交换当前项
      arr[j] = current;
      // 调整间距为1/2
    }
    gap = gap / 2;
  }
  return arr;
}

// Driver program to test above functions
int main()
{
  float arr[] = {170, 45, -75, 90.4, 802, 24, 2, 66};
  int len = sizeof(arr) / sizeof(arr[0]);
  printf("\r\n origin arr1:");
  print_array(arr, len);
  float *result1 = shell_sort(arr, len);
  printf("\r\n sorted:");
  print_array(result1, len);

  float arr2[] = {3, 4.3, 15, 2, 2.4, 123, 2, 3.2, 3, 237, 10};
  int len2 = sizeof(arr2) / sizeof(arr2[0]);
  printf("\r\n origin arr2:");
  print_array(arr2, len2);
  float startTime = clock();
  float *result2 = shell_sort(arr2, len2);
  printf("\r\n sorted:");
  print_array(result2, len2);
  printf("\r\n time: %f ms.", ((clock() - startTime) / CLOCKS_PER_SEC * 1000));
  printf("\r\n shell_sort end\n");
  return 0;
}

/*
jarry@jarrys-MacBook-Pro shellsort % gcc shell_sort.c
jarry@jarrys-MacBook-Pro shellsort % ./a.out         

 origin arr1:{ 170.0, 45.0, -75.0, 90.4, 802.0, 24.0, 2.0, 66.0 }
 gap=4, j=0{ 170.0, 45.0, -75.0, 90.4, 802.0, 24.0, 2.0, 66.0 }
 gap=4, j=1{ 170.0, 45.0, -75.0, 90.4, 802.0, 24.0, 2.0, 66.0 }
 gap=4, j=2{ 170.0, 45.0, -75.0, 90.4, 802.0, 24.0, 2.0, 66.0 }
 gap=4, j=3{ 170.0, 45.0, -75.0, 90.4, 802.0, 24.0, 2.0, 66.0 }
 gap=4, j=4{ 170.0, 45.0, -75.0, 90.4, 802.0, 24.0, 2.0, 66.0 }
 gap=4, j=5{ 170.0, 45.0, -75.0, 90.4, 802.0, 24.0, 2.0, 66.0 }
 gap=4, j=6{ 170.0, 24.0, -75.0, 90.4, 802.0, 45.0, 2.0, 66.0 }
 gap=4, j=7{ 170.0, 24.0, -75.0, 90.4, 802.0, 45.0, 2.0, 66.0 }
 gap=2, j=0{ 170.0, 24.0, -75.0, 66.0, 802.0, 45.0, 2.0, 90.4 }
 gap=2, j=1{ 170.0, 24.0, -75.0, 66.0, 802.0, 45.0, 2.0, 90.4 }
 gap=2, j=2{ 170.0, 24.0, -75.0, 66.0, 802.0, 45.0, 2.0, 90.4 }
 gap=2, j=3{ -75.0, 24.0, 170.0, 66.0, 802.0, 45.0, 2.0, 90.4 }
 gap=2, j=4{ -75.0, 24.0, 170.0, 66.0, 802.0, 45.0, 2.0, 90.4 }
 gap=2, j=5{ -75.0, 24.0, 170.0, 66.0, 802.0, 45.0, 2.0, 90.4 }
 gap=2, j=6{ -75.0, 24.0, 170.0, 45.0, 802.0, 66.0, 2.0, 90.4 }
 gap=2, j=7{ -75.0, 24.0, 2.0, 45.0, 170.0, 66.0, 802.0, 90.4 }
 gap=1, j=0{ -75.0, 24.0, 2.0, 45.0, 170.0, 66.0, 802.0, 90.4 }
 gap=1, j=1{ -75.0, 24.0, 2.0, 45.0, 170.0, 66.0, 802.0, 90.4 }
 gap=1, j=2{ -75.0, 24.0, 2.0, 45.0, 170.0, 66.0, 802.0, 90.4 }
 gap=1, j=3{ -75.0, 2.0, 24.0, 45.0, 170.0, 66.0, 802.0, 90.4 }
 gap=1, j=4{ -75.0, 2.0, 24.0, 45.0, 170.0, 66.0, 802.0, 90.4 }
 gap=1, j=5{ -75.0, 2.0, 24.0, 45.0, 170.0, 66.0, 802.0, 90.4 }
 gap=1, j=6{ -75.0, 2.0, 24.0, 45.0, 66.0, 170.0, 802.0, 90.4 }
 gap=1, j=7{ -75.0, 2.0, 24.0, 45.0, 66.0, 170.0, 802.0, 90.4 }
 sorted:{ -75.0, 2.0, 24.0, 45.0, 66.0, 90.4, 170.0, 802.0 }
 origin arr2:{ 3.0, 4.3, 15.0, 2.0, 2.4, 123.0, 2.0, 3.2, 3.0, 237.0, 10.0 }
 gap=5, j=0{ 3.0, 4.3, 15.0, 2.0, 2.4, 123.0, 2.0, 3.2, 3.0, 237.0, 10.0 }
 gap=5, j=1{ 3.0, 4.3, 15.0, 2.0, 2.4, 123.0, 2.0, 3.2, 3.0, 237.0, 10.0 }
 gap=5, j=2{ 3.0, 4.3, 15.0, 2.0, 2.4, 123.0, 2.0, 3.2, 3.0, 237.0, 10.0 }
 gap=5, j=3{ 3.0, 4.3, 15.0, 2.0, 2.4, 123.0, 2.0, 3.2, 3.0, 237.0, 10.0 }
 gap=5, j=4{ 3.0, 4.3, 15.0, 2.0, 2.4, 123.0, 2.0, 3.2, 3.0, 237.0, 10.0 }
 gap=5, j=5{ 3.0, 4.3, 15.0, 2.0, 2.4, 123.0, 2.0, 3.2, 3.0, 237.0, 10.0 }
 gap=5, j=6{ 3.0, 4.3, 15.0, 2.0, 2.4, 123.0, 2.0, 3.2, 3.0, 237.0, 10.0 }
 gap=5, j=7{ 3.0, 2.0, 15.0, 2.0, 2.4, 123.0, 4.3, 3.2, 3.0, 237.0, 10.0 }
 gap=5, j=8{ 3.0, 2.0, 3.2, 2.0, 2.4, 123.0, 4.3, 15.0, 3.0, 237.0, 10.0 }
 gap=5, j=9{ 3.0, 2.0, 3.2, 2.0, 2.4, 123.0, 4.3, 15.0, 3.0, 237.0, 10.0 }
 gap=5, j=10{ 3.0, 2.0, 3.2, 2.0, 2.4, 123.0, 4.3, 15.0, 3.0, 237.0, 10.0 }
 gap=2, j=0{ 3.0, 2.0, 3.2, 2.0, 2.4, 10.0, 4.3, 15.0, 3.0, 237.0, 123.0 }
 gap=2, j=1{ 3.0, 2.0, 3.2, 2.0, 2.4, 10.0, 4.3, 15.0, 3.0, 237.0, 123.0 }
 gap=2, j=2{ 3.0, 2.0, 3.2, 2.0, 2.4, 10.0, 4.3, 15.0, 3.0, 237.0, 123.0 }
 gap=2, j=3{ 3.0, 2.0, 3.2, 2.0, 2.4, 10.0, 4.3, 15.0, 3.0, 237.0, 123.0 }
 gap=2, j=4{ 3.0, 2.0, 3.2, 2.0, 2.4, 10.0, 4.3, 15.0, 3.0, 237.0, 123.0 }
 gap=2, j=5{ 2.4, 2.0, 3.0, 2.0, 3.2, 10.0, 4.3, 15.0, 3.0, 237.0, 123.0 }
 gap=2, j=6{ 2.4, 2.0, 3.0, 2.0, 3.2, 10.0, 4.3, 15.0, 3.0, 237.0, 123.0 }
 gap=2, j=7{ 2.4, 2.0, 3.0, 2.0, 3.2, 10.0, 4.3, 15.0, 3.0, 237.0, 123.0 }
 gap=2, j=8{ 2.4, 2.0, 3.0, 2.0, 3.2, 10.0, 4.3, 15.0, 3.0, 237.0, 123.0 }
 gap=2, j=9{ 2.4, 2.0, 3.0, 2.0, 3.0, 10.0, 3.2, 15.0, 4.3, 237.0, 123.0 }
 gap=2, j=10{ 2.4, 2.0, 3.0, 2.0, 3.0, 10.0, 3.2, 15.0, 4.3, 237.0, 123.0 }
 gap=1, j=0{ 2.4, 2.0, 3.0, 2.0, 3.0, 10.0, 3.2, 15.0, 4.3, 237.0, 123.0 }
 gap=1, j=1{ 2.4, 2.0, 3.0, 2.0, 3.0, 10.0, 3.2, 15.0, 4.3, 237.0, 123.0 }
 gap=1, j=2{ 2.0, 2.4, 3.0, 2.0, 3.0, 10.0, 3.2, 15.0, 4.3, 237.0, 123.0 }
 gap=1, j=3{ 2.0, 2.4, 3.0, 2.0, 3.0, 10.0, 3.2, 15.0, 4.3, 237.0, 123.0 }
 gap=1, j=4{ 2.0, 2.0, 2.4, 3.0, 3.0, 10.0, 3.2, 15.0, 4.3, 237.0, 123.0 }
 gap=1, j=5{ 2.0, 2.0, 2.4, 3.0, 3.0, 10.0, 3.2, 15.0, 4.3, 237.0, 123.0 }
 gap=1, j=6{ 2.0, 2.0, 2.4, 3.0, 3.0, 10.0, 3.2, 15.0, 4.3, 237.0, 123.0 }
 gap=1, j=7{ 2.0, 2.0, 2.4, 3.0, 3.0, 3.2, 10.0, 15.0, 4.3, 237.0, 123.0 }
 gap=1, j=8{ 2.0, 2.0, 2.4, 3.0, 3.0, 3.2, 10.0, 15.0, 4.3, 237.0, 123.0 }
 gap=1, j=9{ 2.0, 2.0, 2.4, 3.0, 3.0, 3.2, 4.3, 10.0, 15.0, 237.0, 123.0 }
 gap=1, j=10{ 2.0, 2.0, 2.4, 3.0, 3.0, 3.2, 4.3, 10.0, 15.0, 237.0, 123.0 }
 sorted:{ 2.0, 2.0, 2.4, 3.0, 3.0, 3.2, 4.3, 10.0, 15.0, 123.0, 237.0 }
 time: 0.186000 ms.
 shell_sort end
*/